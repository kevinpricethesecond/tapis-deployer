apiVersion: v1
kind: ConfigMap
metadata:
  name: tokens-config
data:
  tokens-config.json: |-
    {
      "primary_site_admin_tenant_base_url": "{{universal_param["service_url"]}}",
      "service_site_id": "{{universal_param["service_site_id"]}}",
      "service_tenant_id": "{{universal_param["service_tenant_id"]}}",
      "use_sk": {{ local_param["use_sk"]|default(defaults["use_sk"])|tojson }},
      "log_level": "{{local_param["log_level"]|default("DEBUG")}}",
      "tenants": {{universal_param["tenants"]|default(["dev", "admin"])|tojson}},
      "show_traceback": {{local_param["show_traceback"]|default("false")|tojson}},
      "use_allservices_password": {{local_param["use_allservices_password"]|default(false)|tojson}},
      {% if local_param["allservices_password"]%}
      "allservices_password": {{local_param["allservices_password"]}},
      {% endif %}
      {% if local_param["dev_jwt_private_key"]%}
      "dev_jwt_private_key": "{{local_param["dev_jwt_private_key"]}}",
      {% endif %}
      "service_name": "{{service_param["service_name"]}}"
    }
